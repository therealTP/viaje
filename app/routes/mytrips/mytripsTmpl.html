<div class="view-body">
  <menu-bar user-data="userData" trip-data="tripData"></menu-bar>
  <div class="page-heading col-sm-3">
    <h1>MY TRIPS</h1>
  </div>
  <div ng-hide="userData.onTrip" class="latest-trip-info col-sm-3">
    <h5>Not currently on a trip.</h5>
    <span>Latest trip: {{tripData.latestTrip.name}}</span>
  </div>
  <div ng-show="userData.onTrip" class="current-trip-info ">
    <span>Current Trip:  {{tripData.latestTrip.name}}</span>
  </div>

  <form ng-hide="userData.onTrip" class="new-trip-form col-sm-12 form-inline">
    <h3>Start a new trip, when you've arrived to first stop: </h3>
    <div class="form-group">
      <label for="new-trip-name">New Trip Name</label>
      <input ng-model="newTrip.name" id="new-trip-name" class="form-control" type="text" placeholder="Enter new trip name">
    </div>
    <div class="form-group">
      <label for="place-search-input">First stop: </label>
        <city-search city-data="firstStopObj.stopData"></city-search>
    </div>
    <button ng-click="startTrip(newTrip, firstStopObj)" class="btn">Start Trip</button>
  </form>

  <div class="form-container col-xs-12 col-sm-9 col-sm-offset-1">
    <form class="new-trip-form form-inline">
      <div class="form-heading-container">
        <h5>Add a completed trip:</h5>
      </div>
      <div class="form-group">
        <label for="old-trip-name">New Trip Name</label>
        <input ng-model="oldTripObj.name" id="old-trip-name" class="form-control" type="text" placeholder="Enter a trip name">
      </div>
      <div class="form-group">
        <label for="start-date-input">Start Date: </label>
        <input type="date" ng-model="oldTripObj.startTimestamp" id="start-date-input">
      </div>
      <div class="form-group">
        <label for="end-date-input">End Date: </label>
        <input type="date" ng-model="oldTripObj.endTimestamp" id="end-date-input">
      </div>
      <div class="button-group form-group">
        <button ng-click="addPastTrip(oldTripObj)" class="btn btn-primary">Add Trip</button>
      </div>
    </form>
  </div>

  <div class="panel-group col-xs-12 col-sm-8 col-sm-offset-2" id="accordion" role="tablist">
    <div ng-repeat="trip in userTrips | orderBy: '+endTimestamp'" class="panel trip-panel panel-default">
      <div class="panel-heading" role="tab" id="{{trip.name + '-panel-heading'">
        <h4 class="panel-title">
          <a href="{{'#' + trip.name + '-panel'}}" data-toggle="collapse" data-parent="#accordion">
            {{trip.name}}
          </a>
        </h4>
        <span>{{trip.startTimestamp | date: 'MM/dd/yyyy'}} - </span>
        <span>{{trip.endTimestamp | date: 'MM/dd/yyyy'}}</span>
      </div>
      <div id="{{trip.name + '-panel'}}" class="panel-collapse collapse" role="tabpanel" aria-labelledby="{{trip.name + '-panel'}}">
        <div class="panel-body">
            <p>
              Trip Stats
            </p>
            <a href="" ui-sref="trip({tripId: trip.$id})">Go To {{trip.name}} Trip Page</a>
          </p>
        </div>
      </div>
    </div>
  </div>

</div>
