<menu-bar user-data="userData" trip-data="tripData"></menu-bar>
<div class="view-body container">

  <div class="page-heading row">
    <div class="col-sm-3">
      <h1>MY TRIPS</h1>
    </div>
    <div ng-hide="userData.onTrip" class="latest-trip-info col-sm-3">
      <h5>Not currently on a trip.</h5>
      <span>Latest trip: {{tripData.latestTrip.name}}</span>
    </div>
  </div>

  <div class="form-container row">
    <form class="new-trip-form form-inline col-xs-12">
      <div class="form-heading-container">
        <h5>Start a new trip, when you've arrived to first stop:</h5>
      </div>
      <div class="form-group">
        <label for="new-trip-name">New Trip Name</label>
        <input ng-model="newTrip.name" id="new-trip-name" class="form-control" type="text" placeholder="Enter new trip name">
      </div>
      <div class="form-group">
        <label for="place-search-input">First stop: </label>
          <city-search city-data="firstStopObj.stopData"></city-search>
      </div>
      <button ng-click="startTrip(newTrip, firstStopObj)" class="btn">Start Trip</button>
    </form>
  </div>


  <div class="form-container row">
    <form class="new-trip-form form-inline col-xs-12">
      <div class="form-heading-container">
        <h5>Add a completed trip:</h5>
      </div>
      <div class="form-group">
        <label for="old-trip-name">New Trip Name</label>
        <input ng-model="oldTripObj.name" id="old-trip-name" class="form-control" type="text" placeholder="Enter a trip name">
      </div>
      <div class="form-group">
        <label for="start-date-input">Start Date: </label>
        <input type="date" ng-model="oldTripObj.startTimestamp" id="start-date-input">
      </div>
      <div class="form-group">
        <label for="end-date-input">End Date: </label>
        <input type="date" ng-model="oldTripObj.endTimestamp" id="end-date-input">
      </div>
      <div class="button-group form-group">
        <button ng-click="addPastTrip(oldTripObj)" class="btn btn-primary">Add Trip</button>
      </div>
    </form>
  </div>

  <div class="row">
    <!-- <script type="text/ng-template" id="group-template.html">
      <div class="panel {{panelClass || 'panel-default'}}">
        <div class="panel-heading">
          <h4 class="panel-title" style="color:#fa39c3">
            <a href tabindex="0" class="accordion-toggle" ng-click="toggleOpen()" uib-accordion-transclude="heading"><span
              ng-class="{'text-muted': isDisabled}">{{heading}}</span></a>
          </h4>
        </div>
        <div class="panel-collapse collapse" uib-collapse="!isOpen">
          <div class="panel-body" style="text-align: right" ng-transclude></div>
        </div>
      </div>
    </script> -->

    <uib-accordion close-others="oneAtATime">
      <uib-accordion-group heading="{{trip.name}}: {{trip.startTimestamp | date: 'MM/dd/yyyy'}} - {{trip.endTimestamp | date: 'MM/dd/yyyy'}}" ng-repeat="trip in userTrips">
        <a ui-sref="trip({tripId: trip.$id})">Go To {{trip.name}} Trip Page</a>
      </uib-accordion-group>
      <!-- <uib-accordion-group heading="Static Header, initially expanded" is-open="status.isFirstOpen" is-disabled="status.isFirstDisabled">
        This content is straight in the template.
      </uib-accordion-group> -->
    </uib-accordion>

  </div>

</div> <!--END -->
